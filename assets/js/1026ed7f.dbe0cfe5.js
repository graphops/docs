"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[392],{3911:(e,r,t)=>{t.r(r),t.d(r,{assets:()=>h,contentTitle:()=>i,default:()=>p,frontMatter:()=>n,metadata:()=>o,toc:()=>c});var s=t(4848),a=t(8453);const n={sidebar_position:2},i="Registry Contract",o={id:"graphcast/sdk/registry",title:"Registry Contract",description:"The Graphcast Registry contracts allow an address to set a GraphcastID by calling setGraphcastID(indexeraddress, graphcastIDaddress) as either an Indexer or an Indexer operator, or calling setGraphcastID(graphcastID_address) as the Indexer address. The relationship between an Indexer address to its GraphcastID is limited to 1:1, and cannot be set to itself. This restriction provides consistency and security for the Indexer identity to operate on Graphcast as one GraphcastID operating across Radio applications. To learn more about the registry, you can check out the Github repository.",source:"@site/docs/graphcast/sdk/registry.md",sourceDirName:"graphcast/sdk",slug:"/graphcast/sdk/registry",permalink:"/graphcast/sdk/registry",draft:!1,unlisted:!1,editUrl:"https://github.com/graphops/docs/edit/main/docs/graphcast/sdk/registry.md",tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"gnSidebar",previous:{title:"Radio Development",permalink:"/graphcast/sdk/radio-dev"},next:{title:"Introduction",permalink:"/graphcast/radios/subgraph-radio/intro"}},h={},c=[{value:"Register a Graphcast ID",id:"register-a-graphcast-id",level:3},{value:"Registry endpoints",id:"registry-endpoints",level:4},{value:"Subgraph APIs",id:"subgraph-apis",level:3}];function d(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"registry-contract",children:"Registry Contract"})}),"\n",(0,s.jsxs)(r.p,{children:["The Graphcast Registry contracts allow an address to set a ",(0,s.jsx)(r.code,{children:"GraphcastID"})," by calling ",(0,s.jsx)(r.code,{children:"setGraphcastID(indexer_address, graphcastID_address)"})," as either an Indexer or an Indexer operator, or calling ",(0,s.jsx)(r.code,{children:"setGraphcastID(graphcastID_address)"})," as the Indexer address. The relationship between an Indexer address to its GraphcastID is limited to 1:1, and cannot be set to itself. This restriction provides consistency and security for the Indexer identity to operate on Graphcast as one GraphcastID operating across Radio applications. To learn more about the registry, you can check out ",(0,s.jsx)(r.a,{href:"https://github.com/graphops/graphcast-registry",children:"the Github repository"}),"."]}),"\n",(0,s.jsxs)(r.p,{children:["There are also ",(0,s.jsx)(r.a,{href:"https://github.com/graphops/graphcast-registry-subgraph",children:"subgraphs"})," for these registry contracts. They provide information on both the Indexer registration status and the GraphcastID registration status, specifically mapping the indexer registered on The Graph service registry contract to GraphcastID registered on the Graphcast registry contract."]}),"\n",(0,s.jsx)(r.h3,{id:"register-a-graphcast-id",children:"Register a Graphcast ID"}),"\n",(0,s.jsx)(r.p,{children:"The Graphcast Registry contract maps Graphcast IDs to Indexers in the Graph Protocol. With a unique Graphcast ID, an Indexer can sign messages for the Radio, eliminating the need to expose their private Indexer (or Indexer Operator) key or mnemonic. This provides an added layer of security, protecting Indexers' sensitive information while enabling participation in the Graphcast Network."}),"\n",(0,s.jsx)(r.p,{children:"Here is a brief overview of the accounts you'll be interacting with:"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Account Name"}),(0,s.jsx)(r.th,{children:"Description"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Indexer Account"}),(0,s.jsx)(r.td,{children:"The existing account associated with your Graph Protocol Indexer. This may be a Token Lock Contract address, or a multisig or EOA address."})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Indexer Operator Account"}),(0,s.jsxs)(r.td,{children:["An account you have registered as an Operator for your Indexer. You can use the Operator account that you pass to ",(0,s.jsx)(r.code,{children:"indexer-agent"}),"."]})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Graphcast ID Account"}),(0,s.jsx)(r.td,{children:"A new account that you will create that is used by Graphcast Radio instances to sign messages on behalf of your Indexer."})]})]})]}),"\n",(0,s.jsxs)(r.p,{children:["You'll need to use a registered ",(0,s.jsx)(r.a,{href:"https://thegraph.com/docs/en/network/indexing/#stake-in-the-protocol",children:"Indexer Operator"})," account for your Indexer to register a Graphcast ID."]}),"\n",(0,s.jsx)(r.mermaid,{value:"flowchart LR\n    subgraph Graphcast Registry\n    A[Graphcast ID] --\x3e|points to| B(Indexer Account)\n    end\n    O[Indexer Operator Account] --\x3e|registers| A"}),"\n",(0,s.jsx)(r.admonition,{type:"tip",children:(0,s.jsxs)(r.p,{children:["You can register multiple Operators for your Indexer in parallel. If you would prefer not to import the Operator account that you use with ",(0,s.jsx)(r.code,{children:"indexer-agent"})," into your wallet in order to register your Graphcast ID, you can generate and register a dedicated operator account for this purpose. After you have registered your Graphcast ID, you can deregister the dedicated operator if you desire."]})}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.a,{href:"https://iancoleman.io/bip39/",children:"Generate a new Ethereum account"})," to act as your Graphcast ID, keeping the details safe. Be sure to select the Ethereum network, and save the mnemonic, as well as the address and private key for the first account. This is your Graphcast ID."]}),"\n",(0,s.jsx)(r.li,{children:"Import your Indexer Operator private key into your wallet (e.g. MetaMask or Frame) in order to send a transaction to register your Graphcast ID."}),"\n",(0,s.jsxs)(r.li,{children:["Navigate to the Graphcast registry contract ",(0,s.jsx)(r.a,{href:"#registry-contracts",children:"for your preferred network"})," and register your Graphcast ID."]}),"\n",(0,s.jsxs)(r.li,{children:["Call ",(0,s.jsx)(r.code,{children:"setGraphcastIDFor(indexer_address, graphcast_id)"}),", passing in your Indexer Address and Graphcast ID. Neither address should be your Indexer Operator address that is being used to sign the transaction."]}),"\n",(0,s.jsx)(r.li,{children:"Submit your transaction and wait for it to be included in a block."}),"\n"]}),"\n",(0,s.jsx)(r.h4,{id:"registry-endpoints",children:"Registry endpoints"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Network"}),(0,s.jsx)(r.th,{children:"Registry Contract"}),(0,s.jsx)(r.th,{children:"Subgraph API"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Ethereum-mainnet"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://etherscan.io/address/0x89f97698d6006f25570cd2e31737d3d22aedcbcf#writeProxyContract",children:"0x89f97698d6006f25570cd2e31737d3d22aedcbcf"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-mainnet",children:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-mainnet"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Ethereum-goerli"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://goerli.etherscan.io/address/0x26ebbA649FAa7b56FDB8DE9Ea17aF3504B76BFA0#writeProxyContract",children:"0x26ebbA649FAa7b56FDB8DE9Ea17aF3504B76BFA0"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-goerli",children:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-goerli"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Arbitrum-one"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://arbiscan.io/address/0xfae79e8cb8fbac2408e5baf89262bd92b6ca464a#writeProxyContract",children:"0xfae79e8cb8fbac2408e5baf89262bd92b6ca464a"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-arb-one",children:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-arb-one"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Arbitrum-goerli"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://goerli.arbiscan.io/address/0x50c2d70a41ecefe4cc54a331457ea204ecf97292#writeProxyContract",children:"0x50c2d70a41ecefe4cc54a331457ea204ecf97292"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.a,{href:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-arbitrum-go",children:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-arbitrum-go"})})]})]})]}),"\n",(0,s.jsx)(r.admonition,{type:"info",children:(0,s.jsxs)(r.p,{children:["Each Graphcast ID can be associated with a single Indexer. To revoke a Graphcast ID for your Indexer, call ",(0,s.jsx)(r.code,{children:"setGraphcastIDFor(indexer_address, graphcast_id)"})," with a Graphcast ID of ",(0,s.jsx)(r.code,{children:"0x0"})," using a registered Indexer Operator Account."]})}),"\n",(0,s.jsx)(r.h3,{id:"subgraph-apis",children:"Subgraph APIs"}),"\n",(0,s.jsxs)(r.p,{children:["Here we list out the APIs the team supports actively. For network subgraph endpoint, We recommend you to expose your indexer-service's endpoint at ",(0,s.jsx)(r.code,{children:"/network"})," queries with authentication. You can also index and serve registry subgraph but they are not currently deployed on the decentralized network."]}),"\n",(0,s.jsx)(r.p,{children:"Here are the endpoints available on the hosted service."}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Protocol Network"}),(0,s.jsx)(r.th,{children:"Graphcast Network"}),(0,s.jsx)(r.th,{children:"Registry Subgraph Endpoint"}),(0,s.jsx)(r.th,{children:"Network Subgraph Endpoint"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Ethereum Mainnet"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"mainnet"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-mainnet"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"https://api.thegraph.com/subgraphs/name/graphprotocol/graph-network-mainnet"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Goerli"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"testnet"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-goerli"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"https://api.thegraph.com/subgraphs/name/graphprotocol/graph-network-goerli"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Arbitrum-One"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"mainnet"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-arb-one"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"https://api.thegraph.com/subgraphs/name/graphprotocol/graph-network-arbitrum"})})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:"Arbitrum-Goerli"}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"testnet"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-arbitrum-go"})}),(0,s.jsx)(r.td,{children:(0,s.jsx)(r.code,{children:"https://api.thegraph.com/subgraphs/name/graphprotocol/graph-network-arbitrum-goerli"})})]})]})]})]})}function p(e={}){const{wrapper:r}={...(0,a.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,r,t)=>{t.d(r,{R:()=>i,x:()=>o});var s=t(6540);const a={},n=s.createContext(a);function i(e){const r=s.useContext(n);return s.useMemo((function(){return"function"==typeof e?e(r):{...r,...e}}),[r,e])}function o(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(n.Provider,{value:r},e.children)}}}]);