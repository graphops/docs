"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1263],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>m});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var o=a.createContext({}),u=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},p=function(e){var t=u(e.components);return a.createElement(o.Provider,{value:t},e.children)},c="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},h=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,i=e.originalType,o=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),c=u(n),h=l,m=c["".concat(o,".").concat(h)]||c[h]||d[h]||i;return n?a.createElement(m,r(r({ref:t},p),{},{components:n})):a.createElement(m,r({ref:t},p))}));function m(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var i=n.length,r=new Array(i);r[0]=h;var s={};for(var o in t)hasOwnProperty.call(t,o)&&(s[o]=t[o]);s.originalType=e,s[c]="string"==typeof e?e:l,r[1]=s;for(var u=2;u<i;u++)r[u]=n[u];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}h.displayName="MDXCreateElement"},1340:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>o,contentTitle:()=>r,default:()=>d,frontMatter:()=>i,metadata:()=>s,toc:()=>u});var a=n(7462),l=(n(7294),n(3905));const i={sidebar_position:3},r="Quick Start",s={unversionedId:"launchpad/quick-start",id:"launchpad/quick-start",title:"Quick Start",description:"This Quick Start guide has not yet been updated for Launchpad V2.",source:"@site/docs/launchpad/quick-start.md",sourceDirName:"launchpad",slug:"/launchpad/quick-start",permalink:"/launchpad/quick-start",draft:!1,editUrl:"https://github.com/graphops/docs/edit/main/docs/launchpad/quick-start.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"launchpadSidebar",previous:{title:"Prerequisites",permalink:"/launchpad/prerequisites"},next:{title:"Design Principles",permalink:"/launchpad/design-principles"}},o={},u=[{value:"Install Taskfile",id:"install-taskfile",level:3},{value:"Use launchpad-starter for your new infra repo",id:"use-launchpad-starter-for-your-new-infra-repo",level:3},{value:"Install the launchpad-core submodule and all local dependencies",id:"install-the-launchpad-core-submodule-and-all-local-dependencies",level:3},{value:"\ud83c\udf89 Milestone: Local environment configured!",id:"-milestone-local-environment-configured",level:3},{value:"Update the configuration with your values",id:"update-the-configuration-with-your-values",level:3},{value:"Bootstrap your hosts with Kubernetes",id:"bootstrap-your-hosts-with-kubernetes",level:3},{value:"Install releases into the cluster for base cluster services",id:"install-releases-into-the-cluster-for-base-cluster-services",level:3},{value:"\ud83c\udf89 Milestone: Kubernetes and core systems running!",id:"-milestone-kubernetes-and-core-systems-running",level:3},{value:"Deploy blockchain namespaces as desired",id:"deploy-blockchain-namespaces-as-desired",level:3},{value:"(optional, eth-goerli) Install Erigon, Nimbus and Proxyd for Ethereum Goerli",id:"optional-eth-goerli-install-erigon-nimbus-and-proxyd-for-ethereum-goerli",level:4},{value:"Install the Graph Goerli Indexer Stack",id:"install-the-graph-goerli-indexer-stack",level:3},{value:"Check Indexer CLI status output",id:"check-indexer-cli-status-output",level:3},{value:"\ud83c\udf89 Milestone: Graph Indexer running and accessible",id:"-milestone-graph-indexer-running-and-accessible",level:3},{value:"Updates",id:"updates",level:2},{value:"Updating <code>launchpad-core</code>",id:"updating-launchpad-core",level:3},{value:"Pulling in starter changes",id:"pulling-in-starter-changes",level:3}],p={toc:u},c="wrapper";function d(e){let{components:t,...n}=e;return(0,l.kt)(c,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"quick-start"},"Quick Start"),(0,l.kt)("admonition",{type:"warning"},(0,l.kt)("p",{parentName:"admonition"},"This Quick Start guide has not yet been updated for Launchpad V2.")),(0,l.kt)("p",null,"Make sure you have all the ",(0,l.kt)("a",{parentName:"p",href:"prerequisites"},"Prerequisites")," before starting."),(0,l.kt)("h3",{id:"install-taskfile"},"Install Taskfile"),(0,l.kt)("p",null,"Launchpad has a large number of tooling dependencies that will run on your local machine. The most important dependency is ",(0,l.kt)("a",{parentName:"p",href:"https://taskfile.dev"},"Taskfile"),"."),(0,l.kt)("p",null,"Follow the ",(0,l.kt)("a",{parentName:"p",href:"https://taskfile.dev/installation/"},"installation instructions")," for your environment and install Taskfile on your local machine before continuing."),(0,l.kt)("h3",{id:"use-launchpad-starter-for-your-new-infra-repo"},"Use launchpad-starter for your new infra repo"),(0,l.kt)("p",null,"Next, we are going to create the repository that will contain your new infrastructure's configuration."),(0,l.kt)("p",null,"First, prepare a new empty repository to hold your infrastructure repo. This could be a new repository on GitHub, GitLab, BitBucket, etc."),(0,l.kt)("p",null,"Next, we're going to clone ",(0,l.kt)("inlineCode",{parentName:"p"},"launchpad-starter"),", and then replace the existing ",(0,l.kt)("inlineCode",{parentName:"p"},"origin")," remote with your new remote repository. This allows us to retain the commit history of ",(0,l.kt)("inlineCode",{parentName:"p"},"launchpad-starter"),". A shared commit history will make future rebases against the upstream ",(0,l.kt)("inlineCode",{parentName:"p"},"launchpad-starter")," much easier."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"#\xa0Clone the starter into my-new-infra and cd into it\ngit clone https://github.com/graphops/launchpad-starter my-new-infra\ncd my-new-infra\n\n# Set your own remote as origin\ngit remote remove origin\ngit remote add origin git@github.com:you/your-infra.git\n\n# Push to your new repo\ngit push origin main\n")),(0,l.kt)("p",null,"All work on your infrastructure will take place in this new repo. We recommend carefully version controlling all changes you make to your infrastructure configuration."),(0,l.kt)("h3",{id:"install-the-launchpad-core-submodule-and-all-local-dependencies"},"Install the launchpad-core submodule and all local dependencies"),(0,l.kt)("p",null,"Next, we need to install the ",(0,l.kt)("inlineCode",{parentName:"p"},"launchpad-core")," submodule, which contains Taskfile definitions, Helm Release templates and other useful things we will use. We also need to install all of the local tooling dependencies (like Helm or Kubectl) that we will need."),(0,l.kt)("p",null,"We can easily do both of these things by running the launchpad:setup command."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# You may need to use sudo for this command\ntask launchpad:setup\n\n# This will run two other tasks:\n# launchpad:update-core, which will install the launchpad-core submodule\n# launchpad:deps, which will install all the local tooling dependencies\n")),(0,l.kt)("p",null,"Installing the ",(0,l.kt)("inlineCode",{parentName:"p"},"launchpad-core")," submodule will leave an uncommitted change in our new repo, so let's commit that now."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},'git add .\ngit commit -m "feat: added launchpad-core submodule"\ngit push origin main\n')),(0,l.kt)("h3",{id:"-milestone-local-environment-configured"},"\ud83c\udf89 Milestone: Local environment configured!"),(0,l.kt)("ul",{className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","We now have our own private git repo containing the declarative configuration for our new infrastructure"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","We have installed all the tooling dependencies on our local machine, which will be used to control the cluster"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Next: Use Launchpad to connect to our servers and set them up")),(0,l.kt)("h3",{id:"update-the-configuration-with-your-values"},"Update the configuration with your values"),(0,l.kt)("p",null,"Next we need to fill out ",(0,l.kt)("inlineCode",{parentName:"p"},"inventory/inventory.yaml"),". This file contains our host definitions."),(0,l.kt)("p",null,"You can find sample configurations in ",(0,l.kt)("inlineCode",{parentName:"p"},"inventory/samples"),". Some details of the different sammple inventory files available:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/graphops/launchpad-starter/blob/main/inventory/samples/single-node.sample.yaml"},(0,l.kt)("inlineCode",{parentName:"a"},"single-node.sample.yaml"))," - shows an example of a cluster running on one host only, the host acting as both a ",(0,l.kt)("inlineCode",{parentName:"li"},"k0s Kubernetes controller")," and a ",(0,l.kt)("inlineCode",{parentName:"li"},"k0s Kubernetes worker")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/graphops/launchpad-starter/blob/main/inventory/samples/single-node-lvm.sample.yaml"},(0,l.kt)("inlineCode",{parentName:"a"},"single-node-lvm.sample.yaml"))," - shows an example of a cluster running on one host only, the host acting as both a ",(0,l.kt)("inlineCode",{parentName:"li"},"k0s Kubernetes controller")," and a ",(0,l.kt)("inlineCode",{parentName:"li"},"k0s Kubernetes worker")," with lvm storage. Here LVM is being used to create single logical volumes of multiple physical volumes."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/graphops/launchpad-starter/blob/main/inventory/samples/single-controller.sample.yaml"},(0,l.kt)("inlineCode",{parentName:"a"},"single-controller.sample.yaml"))," - shows an example of a cluster running on two hosts, one host acting as a ",(0,l.kt)("inlineCode",{parentName:"li"},"k0s Kubernetes controller")," and the other as ",(0,l.kt)("inlineCode",{parentName:"li"},"k0s Kubernetes worker"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/graphops/launchpad-starter/blob/main/inventory/samples/multi-node.sample.yaml"},(0,l.kt)("inlineCode",{parentName:"a"},"multi-node.sample.yaml"))," - shows an example of a HA cluster comprised of three ",(0,l.kt)("inlineCode",{parentName:"li"},"k0s Kubernetes controllers")," and three ",(0,l.kt)("inlineCode",{parentName:"li"},"k0s Kubernetes workers"),"."),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://github.com/graphops/launchpad-starter/blob/main/inventory/samples/multi-node-zfs.sample.yaml"},(0,l.kt)("inlineCode",{parentName:"a"},"multi-node-zfs.sample.yaml"))," - shows an example of a HA cluster comprised of three ",(0,l.kt)("inlineCode",{parentName:"li"},"k0s Kubernetes controllers")," and three ",(0,l.kt)("inlineCode",{parentName:"li"},"k0s Kubernetes workers")," with ",(0,l.kt)("inlineCode",{parentName:"li"},"zfs")," storage. Using this inventory we create ",(0,l.kt)("a",{parentName:"li",href:"https://wiki.archlinux.org/title/ZFS"},(0,l.kt)("inlineCode",{parentName:"a"},"zfs"))," pools on ",(0,l.kt)("inlineCode",{parentName:"li"},"k0s Kubernetes workers")," that will act as an advanced filesystem on each worker node which Kubernetes will use when managing various ",(0,l.kt)("a",{parentName:"li",href:"https://kubernetes.io/docs/concepts/storage/persistent-volumes/"},(0,l.kt)("inlineCode",{parentName:"a"},"persistent-volumes"))," resources.")),(0,l.kt)("h3",{id:"bootstrap-your-hosts-with-kubernetes"},"Bootstrap your hosts with Kubernetes"),(0,l.kt)("p",null,"First, let's apply the base host configuration to your hosts."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"task hosts:apply-base\n")),(0,l.kt)("p",null,"Next, we can install ",(0,l.kt)("a",{parentName:"p",href:"https://k0sproject.io/"},"K0s"),", our chosen distribution of Kubernetes, onto your hosts."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"task hosts:apply-k0s\n")),(0,l.kt)("p",null,"We should now have our cluster credentials at ",(0,l.kt)("inlineCode",{parentName:"p"},"inventory/artifacts/k0s-kubeconfig.yml"),". Let's make these our default credentials."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"# Make sure our config directory exists\nmkdir -p ~/.kube\n# Backup our existing credentials if we have any\nmv ~/.kube/config ~/.kube/config.backup.$(date +%s)\n# Copy our new config into the default location\ncp inventory/artifacts/k0s-kubeconfig.yml ~/.kube/config\n# Set secure permissions on the file\nchmod 600 ~/.kube/config\n")),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"You can now use Kubernetes clients like ",(0,l.kt)("inlineCode",{parentName:"p"},"kubectl"),", ",(0,l.kt)("inlineCode",{parentName:"p"},"k9s")," or ",(0,l.kt)("inlineCode",{parentName:"p"},"octant")," to inspect your Kubernetes cluster and the workloads running inside it. You can use these tools to watch progress as you are installing releases in the steps below.")),(0,l.kt)("h3",{id:"install-releases-into-the-cluster-for-base-cluster-services"},"Install releases into the cluster for base cluster services"),(0,l.kt)("p",null,"Next we need to install key non-Graph components of our stack, including monitoring and logging systems."),(0,l.kt)("p",null,"Let's see what the ",(0,l.kt)("inlineCode",{parentName:"p"},"releases:apply-base")," task is actually doing by running ",(0,l.kt)("inlineCode",{parentName:"p"},"task help -- releases:apply-base"),":"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"task: releases:apply-base\n\nApply all namespaces for base cluster services\n\ncommands:\n\n\u2022 task releases:apply -- sealed-secrets\n\u2022 task releases:apply -- storage\n\u2022 task releases:apply -- monitoring\n\u2022 task releases:apply -- ingress\n\u2022 task releases:apply -- postgres-operator\n")),(0,l.kt)("p",null,"As you can see, ",(0,l.kt)("inlineCode",{parentName:"p"},"releases:apply-base")," just calls ",(0,l.kt)("inlineCode",{parentName:"p"},"releases:apply")," for multiple namespace."),(0,l.kt)("p",null,"First, update configuration in the ",(0,l.kt)("inlineCode",{parentName:"p"},"helmfiles/release-values/<namespace>/*")," for the base namespaces. You will likely need to configure storage and ingress with your own values."),(0,l.kt)("p",null,"Next, let's go ahead and install all the cluster services. You will be prompted to install each namespace, with a summary of changes to be made."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"task releases:apply-base\n")),(0,l.kt)("h3",{id:"-milestone-kubernetes-and-core-systems-running"},"\ud83c\udf89 Milestone: Kubernetes and core systems running!"),(0,l.kt)("ul",{className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","We connected to our hosts, configured them, and installed Kubernetes"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","We installed core cluster services like Prometheus, Grafana, Loki and others"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Next: Deploy blockchain nodes and the Graph Indexing stack")),(0,l.kt)("admonition",{type:"tip"},(0,l.kt)("p",{parentName:"admonition"},"You can now use ",(0,l.kt)("inlineCode",{parentName:"p"},"task indexer:forward-grafana")," to securely access your remote cluster's Grafana instance at http://localhost:3001")),(0,l.kt)("h3",{id:"deploy-blockchain-namespaces-as-desired"},"Deploy blockchain namespaces as desired"),(0,l.kt)("admonition",{type:"note"},(0,l.kt)("p",{parentName:"admonition"},"If you have existing external blockchain nodes that you would like to use instead of deploying them into your cluster, you can skip this section, but make sure that you can access those nodes securely (e.g. via an internal network, or using HTTPS and authentication).")),(0,l.kt)("p",null,"Launchpad comes with namespace defitions for a number of blockchain networks, including Ethereum Mainnet, Ethereum Goerli Testnet, Gnosis Chain Mainnet, Polygon mainnet, Abitrum Mainnet, Avalanche Mainnet, Celo Mainnet and others. Using these defintions, you can easily deploy blockchain nodes for the networks you want to index into your cluster. Namespace definitions are located in your ",(0,l.kt)("inlineCode",{parentName:"p"},"helmfiles/namespace-releases")," folder."),(0,l.kt)("h4",{id:"optional-eth-goerli-install-erigon-nimbus-and-proxyd-for-ethereum-goerli"},"(optional, eth-goerli) Install Erigon, Nimbus and Proxyd for Ethereum Goerli"),(0,l.kt)("p",null,"Update the configuration files in the ",(0,l.kt)("inlineCode",{parentName:"p"},"helmfiles/release-values/eth-goerli")," folder to ensure they are correct. You will need to generate a JWT and configure Erigon and Nimbus with it."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"task releases:apply -- eth-goerli\n")),(0,l.kt)("h3",{id:"install-the-graph-goerli-indexer-stack"},"Install the Graph Goerli Indexer Stack"),(0,l.kt)("p",null,"Update the configuration files in the ",(0,l.kt)("inlineCode",{parentName:"p"},"helmfiles/release-values/graph-goerli")," folder to ensure they are correct."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"task releases:apply -- graph-goerli\n")),(0,l.kt)("h3",{id:"check-indexer-cli-status-output"},"Check Indexer CLI status output"),(0,l.kt)("h3",{id:"-milestone-graph-indexer-running-and-accessible"},"\ud83c\udf89 Milestone: Graph Indexer running and accessible"),(0,l.kt)("ul",{className:"contains-task-list"},(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","We (optionally) configured and deployed blockchain nodes into our cluster"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!0,disabled:!0})," ","We configured and deployed the Graph Indexing stack into our cluster"),(0,l.kt)("li",{parentName:"ul",className:"task-list-item"},(0,l.kt)("input",{parentName:"li",type:"checkbox",checked:!1,disabled:!0})," ","Next: Use the remote-toolbox to allocate to subgraphs and begin serving requests")),(0,l.kt)("h2",{id:"updates"},"Updates"),(0,l.kt)("h3",{id:"updating-launchpad-core"},"Updating ",(0,l.kt)("inlineCode",{parentName:"h3"},"launchpad-core")),(0,l.kt)("p",null,"As new versions of key components in the stack are released, we will update ",(0,l.kt)("inlineCode",{parentName:"p"},"launchpad-core"),"'s templated definitions. You can easily inherit these updates by pulling down the latest submodule."),(0,l.kt)("p",null,"Launchpad comes with a built in task to do this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"task launchpad:update-core\n")),(0,l.kt)("h3",{id:"pulling-in-starter-changes"},"Pulling in starter changes"),(0,l.kt)("p",null,"From time to time, you may want to update your infra repo with the latest changes from our starter. "),(0,l.kt)("p",null,"Launchpad comes with a built in task to do this:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-shell"},"task launchpad:pull-upstream-starter\n")))}d.isMDXComponent=!0}}]);