<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-graphcast/radios/listener-radio">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Listener Radio | GraphOps Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.graphops.xyz/graphcast/radios/listener-radio"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Listener Radio | GraphOps Docs"><meta data-rh="true" name="description" content="The source code for Listener Radio is available on GitHub and Docker builds are automatically published as GitHub Packages."><meta data-rh="true" property="og:description" content="The source code for Listener Radio is available on GitHub and Docker builds are automatically published as GitHub Packages."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.graphops.xyz/graphcast/radios/listener-radio"><link data-rh="true" rel="alternate" href="https://docs.graphops.xyz/graphcast/radios/listener-radio" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.graphops.xyz/graphcast/radios/listener-radio" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="GraphOps Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="GraphOps Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.b3d4b999.css">
<link rel="preload" href="/assets/js/runtime~main.0d7ef15e.js" as="script">
<link rel="preload" href="/assets/js/main.dbd9f55e.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="GraphOps Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="GraphOps Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Documentation</b></a><a class="navbar__item navbar__link" href="/launchpad/intro">Launchpad</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/graphcast/intro">Graphcast</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/graphops/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docs on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/graphcast/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/graphcast/design-principles">Design Principles</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/graphcast/sdk/intro">Graphcast SDK</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/sdk/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/sdk/radio-dev">Radio Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/sdk/registry">Registry Contract</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/graphcast/radios/subgraph-radio/intro">Radios</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" tabindex="0" href="/graphcast/radios/subgraph-radio/intro">Subgraph Radio</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/radios/subgraph-radio/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/radios/subgraph-radio/poi-cross-checking">POI Cross-checking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/radios/subgraph-radio/subgraph-upgrade-presyncing">Subgraph Upgrade Pre-syncing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/radios/subgraph-radio/monitoring">Notifications and Monitoring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/radios/subgraph-radio/advanced-configuration">Advanced Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/radios/subgraph-radio/http-server">HTTP Server</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/radios/graphcast-cli">Graphcast CLI</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/graphcast/radios/listener-radio">Listener Radio</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Radios</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Listener Radio</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Listener Radio</h1><p>The source code for Listener Radio is available <a href="https://github.com/graphops/listener-radio" target="_blank" rel="noopener noreferrer">on GitHub</a> and Docker builds are automatically published as <a href="https://github.com/graphops/listener-radio/pkgs/container/listener-radio" target="_blank" rel="noopener noreferrer">GitHub Packages</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>This Radio shall monitor Graphcast network by the pubsub topic of <code>graphcast-v[version]-[network]</code>. The Radio will not send messages to the network, but instead will record the messages and generate basic metrics for network monitoring.</p><p>Graphcast network is a complex system with numerous nodes and connections, and monitoring it is crucial for maintaining its performance, identifying potential issues, and ensuring its robustness and reliability.</p><ul><li>Performance Optimization: to identify bottlenecks and areas of inefficiency.</li><li>Troubleshooting: to quickly diagnose issues within the network, reducing downtime and improving reliability.</li><li>Security: to immediately detect any unusual activity that might indicate a security breach.</li><li>Planning and Forecasting: Record valuable data that can be used for planning and forecasting purposes, helping us to make informed decisions about the network&#x27;s future.</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="quick-start">Quick Start<a href="#quick-start" class="hash-link" aria-label="Direct link to Quick Start" title="Direct link to Quick Start">​</a></h2><ul><li>Ensure a running Postgres instance</li><li>Set Postgres url to <code>DATABASE_URL</code> in <code>.env</code></li><li>Set general GraphcastAgent environmental variables shown in the below table</li><li><code>cargo run</code> from source code (later should use Github actions to build source and dockerize</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-configuration">Basic Configuration<a href="#basic-configuration" class="hash-link" aria-label="Direct link to Basic Configuration" title="Direct link to Basic Configuration">​</a></h3><p>You will need to prepare the following environment variables:</p><table><thead><tr><th>Name</th><th>Description and examples</th></tr></thead><tbody><tr><td><code>DATABASE_URL</code></td><td>Postgres Database URL. The tool comes with automatic database migration, database url passed in must be exist and can be connected. <br>Example: <code>postgresql://[username]:[password]@[pg_host]:[pg_port]/[db_name]</code></td></tr><tr><td><code>PRIVATE_KEY</code></td><td>Private key to the Graphcast ID wallet (Precendence over mnemonics).<br>Example: <code>0x0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef</code></td></tr><tr><td><code>GRAPH_NODE_STATUS_ENDPOINT</code></td><td>URL to a Graph Node Indexing Status endpoint.<br>Example: <code>http://index-node:8030/graphql</code></td></tr><tr><td><code>REGISTRY_SUBGRAPH</code></td><td>URL to the Graphcast Registry subgraph for your network. Check <a href="/graphcast/sdk/registry#subgraph-apis">APIs</a> for your preferred network</td></tr><tr><td><code>NETWORK_SUBGRAPH</code></td><td>URL to the Graph Network subgraph. Check <a href="/graphcast/sdk/registry#subgraph-apis">APIs</a> for your preferred network</td></tr><tr><td><code>GRAPHCAST_NETWORK</code></td><td>The Graphcast Messaging fleet and pubsub namespace to use.<br>Mainnet: <code>mainnet</code><br>Goerli: <code>testnet</code></td></tr></tbody></table><h4 class="anchor anchorWithStickyNavbar_LWe7" id="example-message-table">Example message table<a href="#example-message-table" class="hash-link" aria-label="Direct link to Example message table" title="Direct link to Example message table">​</a></h4><table><thead><tr><th>id</th><th>message</th></tr></thead><tbody><tr><td>1</td><td>{&quot;nonce&quot;: 1686182179, &quot;network&quot;: &quot;mainnet&quot;, &quot;payload&quot;: {&quot;content&quot;: &quot;0x3f...&quot;, &quot;identifier&quot;: &quot;QmVhiE4nax9i86UBnBmQCYDzvjWuwHShYh7aspGPQhU5Sj&quot;}, &quot;signature&quot;: &quot;dff1...&quot;, &quot;block_hash&quot;: &quot;276e...&quot;, &quot;identifier&quot;: &quot;QmVhiE4nax9i86UBnBmQCYDzvjWuwHShYh7aspGPQhU5Sj&quot;, &quot;block_number&quot;: 17431860}</td></tr><tr><td>2</td><td>{&quot;nonce&quot;: 1686182183, &quot;network&quot;: &quot;goerli&quot;, &quot;payload&quot;: {&quot;content&quot;: &quot;0xc0...&quot;, &quot;identifier&quot;: &quot;QmacQnSgia4iDPWHpeY6aWxesRFdb8o5DKZUx96zZqEWrB&quot;}, &quot;signature&quot;: &quot;dbd2...&quot;, &quot;block_hash&quot;: &quot;0198...&quot;, &quot;identifier&quot;: &quot;QmacQnSgia4iDPWHpeY6aWxesRFdb8o5DKZUx96zZqEWrB&quot;, &quot;block_number&quot;: 9140860}</td></tr><tr><td>...</td><td>...</td></tr></tbody></table><h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-configuration">Advanced Configuration<a href="#advanced-configuration" class="hash-link" aria-label="Direct link to Advanced Configuration" title="Direct link to Advanced Configuration">​</a></h2><p>In the configuration table below is the full list of environment variables you can set, along with example values.</p><p>See <a href="#basic-configuration">Basic Configuration</a> above. The following environment variables are optional:</p><table><thead><tr><th>Name (Optional variables)</th><th>Description and examples</th></tr></thead><tbody><tr><td><code>MNEMONIC</code></td><td>Mnemonic to the Graphcast ID wallet (first address of the wallet is used; Only one of <code>PRIVATE_KEY</code> or <code>MNEMONIC</code> is needed). Example: <code>claptrap armchair violin...</code></td></tr><tr><td><code>COLLECT_MESSAGE_DURATION</code></td><td>Seconds that the Subgraph Radio will wait to collect remote POI attestations before making a comparison with the local POI. Example: <code>120</code> for 2 minutes.</td></tr><tr><td><code>COVERAGE</code></td><td>Toggle for topic coverage level. Possible values: &quot;comprehensive&quot;, &quot;on-chain&quot;, &quot;minimal&quot;. Default is set to &quot;on-chain&quot; coverage.</td></tr><tr><td><code>TOPICS</code></td><td>Comma separated static list of content topics (subgraphs) to subscribe to. Example: <code>QmWmyoMoctfbAaiEs2G46gpeUmhqFRDW6KWo64y5r581Vz,QmUwCFhXM3f6qH9Ls9Y6gDNURBH7mxsn6JcectgxAz6CwU,QmQ1Lyh3U6YgVP6YX1RgRz6c8GmKkEpokLwPvEtJx6cF1y</code></td></tr><tr><td><code>WAKU_HOST</code></td><td>Interface onto which to bind the bundled Waku node. Example: <code>0.0.0.0</code></td></tr><tr><td><code>WAKU_PORT</code></td><td>P2P port on which the bundled Waku node will operate. Example: <code>60000</code></td></tr><tr><td><code>WAKU_NODE_KEY</code></td><td>Static Waku Node Key.</td></tr><tr><td><code>BOOT_NODE_ADDRESSES</code></td><td>Peer addresses to use as Waku boot nodes. Example: <code>&quot;addr1, addr2, addr3&quot;</code></td></tr><tr><td><code>SLACK_TOKEN</code></td><td>Slack Token to use for notifications. Example: <code>xoxp-0123456789-0123456789-0123456789-0123456789</code></td></tr><tr><td><code>TELEGRAM_TOKEN</code></td><td>Telegram Bot Token to use for notifications. Example: <code>123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11</code></td></tr><tr><td><code>TELEGRAM_CHAT_ID</code></td><td>The ID of the Telegram chat to send messages to. Example: <code>-1001234567890</code></td></tr><tr><td><code>SLACK_CHANNEL</code></td><td>Name of Slack channel to send messages to (has to be a public channel). Example: <code>poir-notifications</code></td></tr><tr><td><code>WAKU_LOG_LEVEL</code></td><td>Waku node logging configuration. Example: <code>INFO</code> (is also the default)</td></tr><tr><td><code>RUST_LOG</code></td><td>Rust tracing configuration. Example: <code>graphcast_sdk=debug,subgraph_radio=debug</code>, defaults to <code>info</code> for everything</td></tr><tr><td><code>DISCORD_WEBHOOK</code></td><td>Discord webhook URL for notifications. Example: <code>https://discord.com/api/webhooks/123456789012345678/AbCDeFgHiJkLmNoPqRsTuVwXyZaBcDeFgHiJkLmN</code></td></tr><tr><td><code>METRICS_PORT</code></td><td>If set, the Radio will expose Prometheus metrics on this (off by default). Example: <code>3001</code></td></tr><tr><td><code>METRICS_HOST</code></td><td>If set, the Radio will expose Prometheus metrics on this (off by default). Example: <code>0.0.0.0</code></td></tr><tr><td><code>SERVER_HOST</code></td><td>If <code>SERVER_PORT</code> is set, the Radio will expose an API service on the given host and port. Default: <code>0.0.0.0</code></td></tr><tr><td><code>SERVER_PORT</code></td><td>If set, the Radio will expose an API service on the given port (off by default). Example: <code>8080</code></td></tr><tr><td><code>LOG_FORMAT</code></td><td>Options: <code>pretty</code> - verbose and human readable; <code>json</code> - not verbose and parsable; <code>compact</code> - not verbose and not parsable; <code>full</code> - verbose and not parsible. Default value: <code>pretty</code>.</td></tr><tr><td><code>PERSISTENCE_FILE_PATH</code></td><td>Relative path. If set, the Radio will periodically store states of the program to the file in json format (off by default).</td></tr><tr><td><code>DISCV5_ENRS</code></td><td>Comma separated ENRs for Waku Discv5 bootstrapping. Defaults to empty list.</td></tr><tr><td><code>DISCV5_PORT</code></td><td>Discoverable UDP port. Default: <code>9000</code></td></tr><tr><td><code>ID_VALIDATION</code></td><td>Defines the level of validation for message signers used during radio operation. Options include: <code>no-check</code>, <code>valid-address</code>, <code>graphcast-registered</code>, <code>graph-network-account</code>, <code>registered-indexer</code>, <code>indexer</code></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configurations-explained">Configurations explained<a href="#configurations-explained" class="hash-link" aria-label="Direct link to Configurations explained" title="Direct link to Configurations explained">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="coverage-topic">COVERAGE (topic)<a href="#coverage-topic" class="hash-link" aria-label="Direct link to COVERAGE (topic)" title="Direct link to COVERAGE (topic)">​</a></h4><p><code>COVERAGE</code> is used to specify the topic coverage level. It controls the range of topics (subgraph ipfs hashes) the Indexer subscribes to in order to process data and participate in the network.</p><p>There are three coverage levels available:</p><ul><li><strong>comprehensive</strong>: Subscribe to on-chain topics, user-defined static topics, and subgraph deployments syncing on graph node. This level is useful for Indexers who want to compare public POIs for all deployments syncing on their graph node even if they don&#x27;t have an active allocations open (their stake will not be taken into account in attestation).</li><li><strong>on-chain</strong>: Subscribe to on-chain topics and user-defined static topics. This is the default coverage level and is suitable for indexers who only want to compare data for deployments with active allocations.</li><li><strong>minimal</strong>: Only subscribe to user-defined static topics. This level is for Indexers who want to limit their participation to specific topics of interest.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="identity-validaiton">Identity validaiton<a href="#identity-validaiton" class="hash-link" aria-label="Direct link to Identity validaiton" title="Direct link to Identity validaiton">​</a></h4><p><code>ID_VALIDATION</code> is used to define level of validation for message signers used during radio operation.</p><p>Available Options:</p><ul><li><strong>no-check</strong>: does not perform check on the message signature and does not verify the signer.</li><li><strong>valid-address</strong>: checks the signer to be a valid Ethereum address.</li><li><strong>graphcast-registered</strong>: checks the signer to be registered on Graphcast Registry.</li><li><strong>graph-network-account</strong>: checks the signer to be a Graph account.</li><li><strong>registered-indexer</strong>: checks the signer to be registered on Graphcast Registry and corresponds to an Indexer that satisfies the minimum stake requirement.</li><li><strong>indexer</strong>: checks the signer to be either registered on Graphcast Registry or to be a Graph Account, and corresponds to an Indexer satisfying the minimum stake requirement.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="gossip-protocol">Gossip protocol<a href="#gossip-protocol" class="hash-link" aria-label="Direct link to Gossip protocol" title="Direct link to Gossip protocol">​</a></h4><p><code>WAKU_HOST</code> and <code>WAKU_PORT</code> specify where the bundled Waku node runs. If you want to run multiple Radios, or multiple instances of the same Radio, you should run them on different ports.</p><p>If you want to customize the log level, you can toggle <code>RUST_LOG</code> environment variable. Here&#x27;s an example configuration to get more verbose logging:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">RUST_LOG=&quot;warn,hyper=warn,graphcast_sdk=debug,subgraph_radio=debug&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Discv5</code> is an ambient node discovery network for establishing a decentralized network of interconnected Graphcast Radios. Discv5, when used in Graphcast Radios, serves as a dedicated peer-to-peer discovery protocol that empowers Radios to form an efficient, decentralized network. Without Discv5, the traffic within the Graphcast network would largely rely on centrally hosted boot nodes, leading to a less distributed architecture. However, with Discv5, Radios are capable of directly routing messages among themselves, significantly enhancing network decentralization and reducing reliance on the central nodes. If you want to learn more about Discv5, check out the <a href="https://rfc.vac.dev/spec/33/" target="_blank" rel="noopener noreferrer">official spec</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-the-radio">Monitoring the Radio<a href="#monitoring-the-radio" class="hash-link" aria-label="Direct link to Monitoring the Radio" title="Direct link to Monitoring the Radio">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prometheus--grafana">Prometheus &amp; Grafana<a href="#prometheus--grafana" class="hash-link" aria-label="Direct link to Prometheus &amp; Grafana" title="Direct link to Prometheus &amp; Grafana">​</a></h3><p>The exposed metrics can be scraped by a Prometheus server and displayed in Grafana. In order to use them you have to have a local Prometheus server running and scraping metrics on the provided port. You can specify the metrics host and port by using the environment variables <code>METRICS_PORT</code> and <code>METRICS_HOST</code>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="http-server">HTTP Server<a href="#http-server" class="hash-link" aria-label="Direct link to HTTP Server" title="Direct link to HTTP Server">​</a></h2><p>The Radio spins up an HTTP server with a GraphQL API when <code>SERVER_HOST</code> and <code>SERVER_PORT</code> environment variables are set. The supported routes are:</p><ul><li><code>/health</code> for health status</li><li><code>/api/v1/graphql</code> for GET and POST requests with GraphQL playground interface</li></ul><p>The GraphQL API now includes:</p><p>Below are an example query:</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token keyword" style="font-style:italic">query</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token object">rows</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token object">message</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">nonce</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">network</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token object">payload</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">content</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token object">messages</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">identifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">nonce</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">network</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">blockNumber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">blockHash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">signature</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token object">payload</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">identifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">content</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>example mutation:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">mutation{</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  deleteMessage(id:1)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/graphops/docs/edit/main/docs/graphcast/radios/listener-radio.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/graphcast/radios/graphcast-cli"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Graphcast CLI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#quick-start" class="table-of-contents__link toc-highlight">Quick Start</a><ul><li><a href="#basic-configuration" class="table-of-contents__link toc-highlight">Basic Configuration</a></li></ul></li><li><a href="#advanced-configuration" class="table-of-contents__link toc-highlight">Advanced Configuration</a><ul><li><a href="#configurations-explained" class="table-of-contents__link toc-highlight">Configurations explained</a></li></ul></li><li><a href="#monitoring-the-radio" class="table-of-contents__link toc-highlight">Monitoring the Radio</a><ul><li><a href="#prometheus--grafana" class="table-of-contents__link toc-highlight">Prometheus &amp; Grafana</a></li></ul></li><li><a href="#http-server" class="table-of-contents__link toc-highlight">HTTP Server</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Graph Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/graphprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/graphprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/graphprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Indexer Office Hours</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/TheGraphIOH" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCQ7G_cCufIVUdUUUf-jdoVA" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube Recordings<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://graphops.notion.site/Indexer-Office-Hours-952e0b50a65144768aab922e2c9d102a" target="_blank" rel="noopener noreferrer" class="footer__link-item">All Prior Calls &amp; Agendas<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">GraphOps</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/graphopsxyz" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/graphops" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://graphops.xyz" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"> </div></div></div></footer></div>
<script src="/assets/js/runtime~main.0d7ef15e.js"></script>
<script src="/assets/js/main.dbd9f55e.js"></script>
</body>
</html>