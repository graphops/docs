<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-graphcast/radios/subgraph-radio">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.0">
<title data-rh="true">Subgraph Radio | GraphOps Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.graphops.xyz/graphcast/radios/subgraph-radio"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Subgraph Radio | GraphOps Docs"><meta data-rh="true" name="description" content="The source code for the Subgraph Radio is available on GitHub and Docker builds are automatically published as GitHub Packages. Subgraph Radio is also published as a crate on crates.io."><meta data-rh="true" property="og:description" content="The source code for the Subgraph Radio is available on GitHub and Docker builds are automatically published as GitHub Packages. Subgraph Radio is also published as a crate on crates.io."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://docs.graphops.xyz/graphcast/radios/subgraph-radio"><link data-rh="true" rel="alternate" href="https://docs.graphops.xyz/graphcast/radios/subgraph-radio" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.graphops.xyz/graphcast/radios/subgraph-radio" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="GraphOps Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="GraphOps Docs Atom Feed"><link rel="stylesheet" href="/assets/css/styles.d9a1ff52.css">
<link rel="preload" href="/assets/js/runtime~main.966bbc6c.js" as="script">
<link rel="preload" href="/assets/js/main.e35f3781.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(e){}return e}()||function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="GraphOps Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/logo.svg" alt="GraphOps Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Documentation</b></a><a class="navbar__item navbar__link" href="/launchpad/intro">Launchpad</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/graphcast/intro">Graphcast</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/graphops/docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Docs on GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently dark mode)" aria-label="Switch between dark and light mode (currently dark mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/graphcast/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/graphcast/design-principles">Design Principles</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="true" href="/graphcast/sdk/intro">SDK</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/sdk/intro">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/sdk/radio-dev">Radio Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/sdk/registry">Registry</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/graphcast/radios/3la-monitor">Radios</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/radios/3la-monitor">3LA - Listener Radio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/graphcast/radios/subgraph-radio">Subgraph Radio</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/graphcast/radios/one-shot">One-shot CLI</a></li></ul></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Radios</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Subgraph Radio</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Subgraph Radio</h1><p>The source code for the Subgraph Radio is available <a href="https://github.com/graphops/subgraph-radio" target="_blank" rel="noopener noreferrer">on GitHub</a> and Docker builds are automatically published as <a href="https://github.com/graphops/subgraph-radio/pkgs/container/subgraph-radio" target="_blank" rel="noopener noreferrer">GitHub Packages</a>. Subgraph Radio is also published as a crate <a href="https://crates.io/crates/subgraph-radio" target="_blank" rel="noopener noreferrer">on crates.io</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="introduction">Introduction<a href="#introduction" class="hash-link" aria-label="Direct link to Introduction" title="Direct link to Introduction">​</a></h2><p>Subgraph Radio is an optional component of the Graph Protocol Indexer Stack. It uses the Graphcast Network to facilitate the exchange of Subgraph data and information among Indexers and other participants in the network.</p><p>An essential aspect of earning indexing rewards as an Indexer is the generation of valid Proof of Indexing hashes (POIs). These POIs provide evidence of the Indexer&#x27;s possession of correct data. Submitting invalid POIs could lead to a <a href="https://thegraph.com/docs/en/network/indexing/#what-are-disputes-and-where-can-i-view-them" target="_blank" rel="noopener noreferrer">Dispute</a> and possible slashing by the protocol. With Subgraph Radio&#x27;s POI functionality, Indexers gain confidence knowing that their POIs are continually cross-verified against those of other participating Indexers. Should there be a discrepancy in POIs, Subgraph Radio functions as an early warning system, alerting the Indexer within minutes.</p><p>All POIs generated through Subgraph Radio are public (normalized), meaning they are hashed with a <code>0x0</code> Indexer Address and can be compared between Indexers. However, these public POIs are not valid for on-chain reward submission. Subgraph Radio groups and weighs public POIs according to the aggregate stake in GRT attesting to each. The normalized POI with the most substantial aggregate attesting stake is deemed canonical and used for comparisons with your local Indexer POIs.</p><p>For enhanced security, we recommend running Subgraph Radio with an independent Graphcast ID linked to your Indexer account. This Graphcast ID is an Ethereum account authorized to sign POI attestations on behalf of your Indexer. By default, Subgraph Radio validates messages received from any signer, that can be resolved to an Indexer address, regardless of whether or not they are registered on the Graphcast registry (though this behavior can be altered by setting the ID_VALIDATION config variable). Learn how to register a Graphcast ID <a href="https://docs.graphops.xyz/graphcast/sdk/registry#register-a-graphcast-id" target="_blank" rel="noopener noreferrer">here</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="basic-configuration">Basic Configuration<a href="#basic-configuration" class="hash-link" aria-label="Direct link to Basic Configuration" title="Direct link to Basic Configuration">​</a></h3><p>The Subgraph Radio is configured using environment variables. You will need to prepare the following environment variables:</p><table><thead><tr><th>Name</th><th>Description and examples</th><th></th></tr></thead><tbody><tr><td><code>PRIVATE_KEY</code></td><td>Private key of the Graphcast ID wallet or the Indexer Operator wallet (precendence over <code>MNEMONICS</code>).<br>Example: <code>0x0123456789abcdef0123456789abcdef0123456789abcdef0123456789abcdef</code></td><td></td></tr><tr><td><code>INDEXER_ADDRESS</code></td><td>Indexer address for Graphcast message verification, in all lowercase.<br>Example: <code>0xabcdcabdabcdabcdcabdabcdabcdcabdabcdabcd</code></td><td></td></tr><tr><td><code>GRAPH_NODE_STATUS_ENDPOINT</code></td><td>URL to a Graph Node Indexing Status endpoint.<br>Example: <code>http://index-node:8030/graphql</code></td><td></td></tr><tr><td><code>REGISTRY_SUBGRAPH</code></td><td>URL to the Graphcast Registry subgraph for your network. Check <a href="/graphcast/sdk/registry#subgraph-apis">APIs</a> for your preferred network</td><td></td></tr><tr><td><code>NETWORK_SUBGRAPH</code></td><td>URL to the Graph Network subgraph. Check <a href="/graphcast/sdk/registry#subgraph-apis">APIs</a> for your preferred network</td><td></td></tr><tr><td><code>GRAPHCAST_NETWORK</code></td><td>The Graphcast Messaging fleet and pubsub namespace to use.<br>Mainnet: <code>mainnet</code><br>Goerli: <code>testnet</code></td><td></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-with-docker">Run with Docker<a href="#run-with-docker" class="hash-link" aria-label="Direct link to Run with Docker" title="Direct link to Run with Docker">​</a></h3><ol><li>Pull the Subgraph Radio image</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> pull ghcr.io/graphops/subgraph-radio:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ol start="2"><li>Run the image, providing the required environment variables. Here&#x27;s a sample mainnet configuration:</li></ol><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker</span><span class="token plain"> run </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GRAPHCAST_NETWORK</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mainnet&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">REGISTRY_SUBGRAPH</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-mainnet&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">NETWORK_SUBGRAPH</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://api.thegraph.com/subgraphs/name/graphprotocol/graph-network-mainnet&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">PRIVATE_KEY</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;PRIVATE_KEY&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">GRAPH_NODE_STATUS_ENDPOINT</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://graph-node:8030/graphql&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">RUST_LOG</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;warn,hyper=warn,graphcast_sdk=info,subgraph_radio=info&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    -e </span><span class="token assign-left variable" style="color:rgb(191, 199, 213)">INDEXER_ADDRESS</span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;INDEXER_ADDRESS&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ghcr.io/graphops/subgraph-radio:latest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="or-run-with-docker-compose">(or) Run with docker-compose<a href="#or-run-with-docker-compose" class="hash-link" aria-label="Direct link to (or) Run with docker-compose" title="Direct link to (or) Run with docker-compose">​</a></h3><p>You can append this service definition to your <code>docker-compose</code> manifest and customise the definitions:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic"># ... your other service definitions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">subgraph-radio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">image</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> ghcr.io/graphops/subgraph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">radio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">container_name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> subgraph</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">radio</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">restart</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> unless</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">stopped</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">environment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">GRAPHCAST_NETWORK</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;mainnet&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">REGISTRY_SUBGRAPH</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://api.thegraph.com/subgraphs/name/hopeyen/graphcast-registry-mainnet&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">NETWORK_SUBGRAPH</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;https://api.thegraph.com/subgraphs/name/graphprotocol/graph-network-mainnet&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">PRIVATE_KEY</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;PRIVATE_KEY&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">GRAPH_NODE_STATUS_ENDPOINT</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;http://graph-node:8030/graphql&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">RUST_LOG</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;warn,hyper=warn,graphcast_sdk=info,subgraph_radio=info&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">INDEXER_ADDRESS</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;INDEXER_ADDRESS&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">logging</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">driver</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> local</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="or-run-as-part-of-stakesquids-docker-compose-setup">(or) Run as part of <a href="https://github.com/StakeSquid" target="_blank" rel="noopener noreferrer">StakeSquid</a>&#x27;s docker-compose setup<a href="#or-run-as-part-of-stakesquids-docker-compose-setup" class="hash-link" aria-label="Direct link to or-run-as-part-of-stakesquids-docker-compose-setup" title="Direct link to or-run-as-part-of-stakesquids-docker-compose-setup">​</a></h3><p>Subgraph Radio is included as an optional component in both the <a href="https://github.com/StakeSquid/graphprotocol-mainnet-docker" target="_blank" rel="noopener noreferrer">mainnet</a> and <a href="https://github.com/StakeSquid/graphprotocol-testnet-docker" target="_blank" rel="noopener noreferrer">testnet</a> versions of StakeSquid&#x27;s guide.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="or-run-using-a-pre-built-binary">(or) Run using a pre-built binary<a href="#or-run-using-a-pre-built-binary" class="hash-link" aria-label="Direct link to (or) Run using a pre-built binary" title="Direct link to (or) Run using a pre-built binary">​</a></h3><p>We also provide pre-built binaries for Ubuntu and MacOS, which you can find in the <code>Assets</code> section on each release in the <a href="https://github.com/graphops/subgraph-radio/releases" target="_blank" rel="noopener noreferrer">releases page</a> on Github. Simply download the binary, make it executable (<code>chmod a+x ./subgraph-radio-{TAG}-{SYSTEM}</code>) and then run it (using <code>./subgraph-radio-{TAG}-{SYSTEM}</code>).</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="advanced-configuration">Advanced Configuration<a href="#advanced-configuration" class="hash-link" aria-label="Direct link to Advanced Configuration" title="Direct link to Advanced Configuration">​</a></h2><p>In the configuration table below is the full list of environment variables you can set, along with example values.</p><p>See <a href="#basic-configuration">Basic Configuration</a> above. The following environment variables are optional:</p><table><thead><tr><th>Name (Optional variables)</th><th>Description and examples</th></tr></thead><tbody><tr><td><code>MNEMONIC</code></td><td>Mnemonic to the Graphcast ID wallet or the Indexer Operator wallet (first address of the wallet is used; Only one of <code>PRIVATE_KEY</code> or <code>MNEMONIC</code> is needed). Example: <code>claptrap armchair violin...</code></td></tr><tr><td><code>COLLECT_MESSAGE_DURATION</code></td><td>Seconds that the Subgraph Radio will wait to collect remote POI attestations before making a comparison with the local POI. Example: <code>120</code> for 2 minutes.</td></tr><tr><td><code>COVERAGE</code></td><td>Toggle for topic coverage level. Possible values: &quot;comprehensive&quot;, &quot;on-chain&quot;, &quot;minimal&quot;. Default is set to &quot;comprehensive&quot; coverage.</td></tr><tr><td><code>TOPICS</code></td><td>Comma separated static list of content topics (subgraphs) to subscribe to. Example: <code>QmWmyoMoctfbAaiEs2G46gpeUmhqFRDW6KWo64y5r581Vz,QmUwCFhXM3f6qH9Ls9Y6gDNURBH7mxsn6JcectgxAz6CwU,QmQ1Lyh3U6YgVP6YX1RgRz6c8GmKkEpokLwPvEtJx6cF1y</code></td></tr><tr><td><code>WAKU_HOST</code></td><td>Interface onto which to bind the bundled Waku node. Example: <code>0.0.0.0</code></td></tr><tr><td><code>WAKU_PORT</code></td><td>P2P port on which the bundled Waku node will operate. Example: <code>60000</code></td></tr><tr><td><code>WAKU_NODE_KEY</code></td><td>Static Waku Node Key.</td></tr><tr><td><code>BOOT_NODE_ADDRESSES</code></td><td>Peer addresses to use as Waku boot nodes. Example: <code>&quot;addr1, addr2, addr3&quot;</code></td></tr><tr><td><code>SLACK_TOKEN</code></td><td>Slack Token to use for notifications. Example: <code>xoxp-0123456789-0123456789-0123456789-0123456789</code></td></tr><tr><td><code>TELEGRAM_TOKEN</code></td><td>Telegram Bot Token to use for notifications. Example: <code>123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11</code></td></tr><tr><td><code>TELEGRAM_CHAT_ID</code></td><td>The ID of the Telegram chat to send messages to. Example: <code>-1001234567890</code></td></tr><tr><td><code>SLACK_CHANNEL</code></td><td>Name of Slack channel to send messages to (has to be a public channel). Example: <code>poir-notifications</code></td></tr><tr><td><code>WAKU_LOG_LEVEL</code></td><td>Waku node logging configuration. Example: <code>INFO</code> (is also the default)</td></tr><tr><td><code>RUST_LOG</code></td><td>Rust tracing configuration. Example: <code>graphcast_sdk=debug,subgraph_radio=debug</code>, defaults to <code>info</code> for everything</td></tr><tr><td><code>DISCORD_WEBHOOK</code></td><td>Discord webhook URL for notifications. Example: <code>https://discord.com/api/webhooks/123456789012345678/AbCDeFgHiJkLmNoPqRsTuVwXyZaBcDeFgHiJkLmN</code></td></tr><tr><td><code>METRICS_PORT</code></td><td>If set, the Radio will expose Prometheus metrics on this (off by default). Example: <code>3001</code></td></tr><tr><td><code>METRICS_HOST</code></td><td>If set, the Radio will expose Prometheus metrics on this (off by default). Example: <code>0.0.0.0</code></td></tr><tr><td><code>SERVER_HOST</code></td><td>If <code>SERVER_PORT</code> is set, the Radio will expose an API service on the given host and port. Default: <code>0.0.0.0</code></td></tr><tr><td><code>SERVER_PORT</code></td><td>If set, the Radio will expose an API service on the given port (off by default). Example: <code>8080</code></td></tr><tr><td><code>LOG_FORMAT</code></td><td>Options: <code>pretty</code> - verbose and human readable; <code>json</code> - not verbose and parsable; <code>compact</code> - not verbose and not parsable; <code>full</code> - verbose and not parsible. Default value: <code>pretty</code>.</td></tr><tr><td><code>PERSISTENCE_FILE_PATH</code></td><td>Relative path. If set, the Radio will periodically store states of the program to the file in json format (off by default).</td></tr><tr><td><code>DISCV5_ENRS</code></td><td>Comma separated ENRs for Waku Discv5 bootstrapping. Defaults to empty list.</td></tr><tr><td><code>DISCV5_PORT</code></td><td>Discoverable UDP port. Default: <code>9000</code></td></tr><tr><td><code>ID_VALIDATION</code></td><td>Defines the level of validation for message signers used during radio operation. Options include: <code>no-check</code>, <code>valid-address</code>, <code>graphcast-registered</code>, <code>graph-network-account</code>, <code>registered-indexer</code>, <code>indexer</code>. Default: <code>indexer</code></td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configurations-explained">Configurations explained<a href="#configurations-explained" class="hash-link" aria-label="Direct link to Configurations explained" title="Direct link to Configurations explained">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="coverage-topic">COVERAGE (topic)<a href="#coverage-topic" class="hash-link" aria-label="Direct link to COVERAGE (topic)" title="Direct link to COVERAGE (topic)">​</a></h4><p><code>COVERAGE</code> is used to specify the topic coverage level. It controls the range of topics (subgraph ipfs hashes) the Indexer subscribes to in order to process data and participate in the network.</p><p>There are three coverage levels available:</p><ul><li><strong>comprehensive</strong>: Subscribe to on-chain topics, user-defined static topics, and subgraph deployments syncing on graph node. This level is useful for Indexers who want to compare public POIs for all deployments syncing on their graph node even if they don&#x27;t have an active allocations open (their stake will not be taken into account in attestation).</li><li><strong>on-chain</strong>: Subscribe to on-chain topics and user-defined static topics. This is the default coverage level and is suitable for indexers who only want to compare data for deployments with active allocations.</li><li><strong>minimal</strong>: Only subscribe to user-defined static topics. This level is for Indexers who want to limit their participation to specific topics of interest.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="identity-validaiton">Identity validaiton<a href="#identity-validaiton" class="hash-link" aria-label="Direct link to Identity validaiton" title="Direct link to Identity validaiton">​</a></h4><p><code>ID_VALIDATION</code> is used to define level of validation for message signers used during radio operation. We recommend <code>registered-indexer</code> for most strict identity validation, while <code>indexer</code> is a viable option for those who want to use the network before considering Grapchast ID registration. You can choose a sender identity validation mechanism for your radio, based on your use case and security preferences.</p><p>Available Options:</p><ul><li><strong>no-check</strong>: Does not perform check on the message signature and does not verify the signer. All messages should pass the sender check.</li><li><strong>valid-address</strong>: Requires the signer to be a valid Ethereum address. Messages should be traceable to an Ethers wallet.</li><li><strong>graphcast-registered</strong>: Requires the signer to be registered on the Graphcast Registry.</li><li><strong>graph-network-account</strong>: signer must be a Graph account.</li><li><strong>registered-indexer</strong>: signer must be registered at Graphcast Registry and correspond to an Indexer satisfying the indexer minimum stake requirement.</li><li><strong>indexer</strong>: signer must be registered at Graphcast Registry or is a Graph Account, and correspond to an Indexer satisfying the indexer minimum stake requirement.</li></ul><h4 class="anchor anchorWithStickyNavbar_LWe7" id="gossip-protocol">Gossip protocol<a href="#gossip-protocol" class="hash-link" aria-label="Direct link to Gossip protocol" title="Direct link to Gossip protocol">​</a></h4><p><code>WAKU_HOST</code> and <code>WAKU_PORT</code> specify where the bundled Waku node runs. If you want to run multiple Radios, or multiple instances of the same Radio, you should run them on different ports.</p><p>If you want to customize the log level, you can toggle <code>RUST_LOG</code> environment variable. Here&#x27;s an example configuration to get more verbose logging:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">RUST_LOG=&quot;warn,hyper=warn,graphcast_sdk=debug,subgraph_radio=debug&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>Discv5</code> is an ambient node discovery network for establishing a decentralized network of interconnected Graphcast Radios. Discv5, when used in Graphcast Radios, serves as a dedicated peer-to-peer discovery protocol that empowers Radios to form an efficient, decentralized network. Without Discv5, the traffic within the Graphcast network would largely rely on centrally hosted boot nodes, leading to a less distributed architecture. However, with Discv5, Radios are capable of directly routing messages among themselves, significantly enhancing network decentralization and reducing reliance on the central nodes. If you want to learn more about Discv5, check out the <a href="https://rfc.vac.dev/spec/33/" target="_blank" rel="noopener noreferrer">official spec</a>.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="state-management">State management<a href="#state-management" class="hash-link" aria-label="Direct link to State management" title="Direct link to State management">​</a></h4><p><code>PERSISTENCE_FILE_PATH</code> configuration variable allows the Radio to maintain operational continuity across sessions. When the file path is set, it triggers the Radio to periodically store its state, including local attestations, remote messages and POI comparison results in a JSON-formatted file at the specified path. This facilitates seamless session transitions and minimizes data loss. In the event of a system disruption, the state can be reloaded from this file, ensuring the Radio can resume operation effectively.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="monitoring-the-radio">Monitoring the Radio<a href="#monitoring-the-radio" class="hash-link" aria-label="Direct link to Monitoring the Radio" title="Direct link to Monitoring the Radio">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="notifications">Notifications<a href="#notifications" class="hash-link" aria-label="Direct link to Notifications" title="Direct link to Notifications">​</a></h3><p>If the Radio operator has set up a Slack, Discord and/or Telegram bot integration and the Radio finds a POI mismatch, it sends alerts to the designated channels. The operator can also inspect the logs to see if the Radio is functioning properly, if it&#x27;s sending and receiving messages, if it&#x27;s comparing normalised POIs, if there is a found POI mismatch, etc.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="prometheus--grafana">Prometheus &amp; Grafana<a href="#prometheus--grafana" class="hash-link" aria-label="Direct link to Prometheus &amp; Grafana" title="Direct link to Prometheus &amp; Grafana">​</a></h3><p>The Subgraph Radio exposes metrics that can then be scraped by a Prometheus server and displayed in Grafana. In order to use them you have to have a local Prometheus server running and scraping metrics on the provided port. You can specify the metrics host and port by using the environment variables <code>METRICS_PORT</code> and <code>METRICS_HOST</code>. We also provide a <a href="https://github.com/graphops/subgraph-radio/blob/main/subgraph-radio-grafana.json" target="_blank" rel="noopener noreferrer">Grafana dashboard config JSON file</a> which you can use to visualise the metrics in Grafana.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="http-server">HTTP Server<a href="#http-server" class="hash-link" aria-label="Direct link to HTTP Server" title="Direct link to HTTP Server">​</a></h2><p>The Radio spins up an HTTP server with a GraphQL API when <code>SERVER_HOST</code> and <code>SERVER_PORT</code> environment variables are set. The supported routes are:</p><ul><li><code>/health</code> for health status</li><li><code>/api/v1/graphql</code> for GET and POST requests with GraphQL playground interface</li></ul><p>The GraphQL API now includes several advanced queries:</p><ul><li><code>radioPayloadMessages</code></li><li><code>localAttestations</code></li><li><code>comparisonResults</code></li><li><code>stakeRatio</code></li><li><code>senderRatio</code></li></ul><p>Below are some example queries:</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token object">Query</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token object">radioPayloadMessages</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">identifier</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">nonce</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">blockNumber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">network</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">signature</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token object">localAttestations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">blockNumber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token object">attestation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">ppoi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property-query">comparisonResults</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">identifier</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Qm....&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">blockNumber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">resultType</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token object">localAttestation</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">ppoi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token object">attestations</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">ppoi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property-query">stakeRatio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">filter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token attr-name" style="color:rgb(255, 203, 107)">deployment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;__&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 203, 107)">blockNumber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;___&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">blockNumber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">compareRatio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token object">senderRatio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">blockNumber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">compareRatio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>You can customize the returned data from the <code>stakeRatio</code> and <code>senderRatio</code> queries by providing optional filters as arguments:</p><ul><li><code>deployment</code> - If provided, only attestations for the specified deployment will be included in the comparison.</li><li><code>block</code> - If provided, only attestations for the specified block number will be included in the comparison.</li><li><code>filter</code> - A more complex filter that can include deployment, block_number, and result_type fields. This filter is used to further refine the set of attestations included in the comparison.
Here&#x27;s an example of a query with filters:</li></ul><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token object">Query</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property-query">stakeRatio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token attr-name" style="color:rgb(255, 203, 107)">filter</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token attr-name" style="color:rgb(255, 203, 107)">deployment</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Qm....&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 203, 107)">blockNumber</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">12345</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token attr-name" style="color:rgb(255, 203, 107)">result_type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;Type_Name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">blockNumber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">compareRatio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In this example, the <code>stakeRatio</code> query will return the stake ratios only for attestations from deployment &quot;Qm....&quot; and block number 12345, and only for the specified result type.</p><p>Note: The <code>result_type</code> field of the filter corresponds to the <code>resultType</code> field in the <code>comparisonResults</code> query. This field represents the type of comparison result.</p><p>The API also includes the <code>senderRatio</code> and <code>stakeRatio</code> endpoints, which return more detailed insights into the state of the Radio.</p><p><code>senderRatio</code> provides an overview of the consensus status of the attestations from remote messages. It gives a ratio string that signifies the number of indexers with the same public POI as the local Radio. The results are presented as <code>x/y!/z</code> where:</p><ul><li><code>x</code>, <code>y</code>, and <code>z</code> are sorted by descending stake weights</li><li><code>!</code> indicates the entry that corresponds to the local result.</li></ul><p>For example,<code> 2/0!</code> means there are two indexers attesting with a higher sum of stake weight and no other indexer shares the same public POIs as the local Radio. <code>8!</code> means there are eight other indexers agreeing with the local Radio.</p><p><code>stakeRatio</code> offers similar functionality to senderRatio but the results are based on the stake weight. It orders the attestations by stake weight, then computes the ratio of unique senders.</p><div class="language-graphql codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-graphql codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token object">Query</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token object">senderRatio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">blockNumber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">compareRatio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token object">stakeRatio</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">deployment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">blockNumber</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">compareRatio</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>These queries provide a clear aggregation of the attestations from remote messages, giving a concise understanding of the Radio&#x27;s state. The optional filters - deployment, block, and filter - can be used to refine the results.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-it-works">How it works<a href="#how-it-works" class="hash-link" aria-label="Direct link to How it works" title="Direct link to How it works">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="fetching-active-allocations">Fetching active allocations<a href="#fetching-active-allocations" class="hash-link" aria-label="Direct link to Fetching active allocations" title="Direct link to Fetching active allocations">​</a></h3><p>The Subgraph Radio is responsible for reading active allocations of the Radio operator&#x27;s corresponding Indexer. It periodically polls the Graph Node for new blocks on all relevant networks and constructs Graphcast topics on each allocation identified by subgraph deployment IPFS hash.</p><div class="theme-admonition theme-admonition-tip alert alert--success admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_S0QG"><p>The relevant networks are those corresponding to the subgraphs that have active allocations.</p></div></div><p>The Radio fetches new active allocations at a regular interval to ensure that it is processing the latest information. Chainheads for these networks are updated with data from the Graph Node, and the Radio ensures that it is always using the latest chainhead when processing messages.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="gathering-and-comparing-normalised-pois">Gathering and comparing normalised POIs<a href="#gathering-and-comparing-normalised-pois" class="hash-link" aria-label="Direct link to Gathering and comparing normalised POIs" title="Direct link to Gathering and comparing normalised POIs">​</a></h3><p>At a given interval, the Radio fetches the normalised POI for each deployment. This interval is defined in blocks different for each network. It then saves those public POIs, and as other Indexers running the Radio start doing the same, messages start propagating through the network. The Radio saves each message and processes them on a given interval.</p><p>The messages include a nonce (UNIX timestamp), block number, signature (used to derive the sender&#x27;s on-chain Indexer address) and network. Before saving an entry to the map, the Radio operator verifies through the Graph network subgraph for the sender&#x27;s on-chain identity and amount of tokens staked, which is used during comparisons later on.</p><p>At another interval, the Radio compares the local public POIs with the collected remote ones. The remote POIs are sorted so that for each subgraph (on each block), the POI that is backed by the most on-chain stake is selected. This means that the combined stake of all Indexers that attested to it is considered, not just the highest staking Indexer. The top POI is then compared with the local POIs for that subgraph at that block to determine consensus.</p><p>If there is a mismatch and if the Radio operator has set up a Slack, Discord and/or Telegram bot integration, the Radio will send alerts to the designated channels.</p><p>After a successful comparison, the attestations that have been checked are removed from the store.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="developing-the-subgraph-radio">Developing the Subgraph Radio<a href="#developing-the-subgraph-radio" class="hash-link" aria-label="Direct link to Developing the Subgraph Radio" title="Direct link to Developing the Subgraph Radio">​</a></h2><h4 class="anchor anchorWithStickyNavbar_LWe7" id="building-the-image-using-the-dockerfile-locally">Building the image using the Dockerfile locally<a href="#building-the-image-using-the-dockerfile-locally" class="hash-link" aria-label="Direct link to Building the image using the Dockerfile locally" title="Direct link to Building the image using the Dockerfile locally">​</a></h4><p>If you want to make any changes to the Subgraph Radio codebase, you can use this option.</p><h5 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites">Prerequisites<a href="#prerequisites" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h5><ol><li>Clone this repo and <code>cd</code> into it</li><li>Create a <code>.env</code> file that includes at least the required environment variables. To see the full list of environment variables you can provide, check out the <a href="#configuration">Configuration</a> section.</li></ol><h5 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-subgraph-radio-inside-a-docker-container">Running the Subgraph Radio inside a Docker container<a href="#running-the-subgraph-radio-inside-a-docker-container" class="hash-link" aria-label="Direct link to Running the Subgraph Radio inside a Docker container" title="Direct link to Running the Subgraph Radio inside a Docker container">​</a></h5><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token function" style="color:rgb(130, 170, 255)">docker-compose</span><span class="token plain"> up -d</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="building-subgraph-radio-locally">Building Subgraph Radio locally<a href="#building-subgraph-radio-locally" class="hash-link" aria-label="Direct link to Building Subgraph Radio locally" title="Direct link to Building Subgraph Radio locally">​</a></h3><p>To have full control over the Subgraph Radio code and run it directly on your machine (without Docker) you can use this option.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="prerequisites-1">Prerequisites<a href="#prerequisites-1" class="hash-link" aria-label="Direct link to Prerequisites" title="Direct link to Prerequisites">​</a></h4><ol><li>Clone this repo and <code>cd</code> into it</li><li>Make sure you have the following installed:</li></ol><ul><li><a href="https://www.rust-lang.org/tools/install" target="_blank" rel="noopener noreferrer">Rust</a></li><li><a href="https://go.dev/doc/install" target="_blank" rel="noopener noreferrer">Go</a></li><li>Build tools (e.g. the <code>build-essentials</code> package for Debian-based Linux distributions or <a href="https://mac.install.guide/commandlinetools/index.html" target="_blank" rel="noopener noreferrer">Xcode Command Line Tools</a> for MacOS)</li><li>C compiler (e.g. the <code>clang</code> package for Debian-based Linux distribution or <a href="https://mac.install.guide/commandlinetools/index.html" target="_blank" rel="noopener noreferrer">Xcode Command Line Tools</a> for MacOS)</li><li>OpenSSL (e.g. the <code>libssl-dev</code> package for Debian-based Linux distribution or <code>openssl</code> for MacOS)</li><li>PostreSQL libraries and headers (e.g. the <code>libpq-dev</code> package for Debian-based Linux distribution or <code>postgresql</code> for MacOS)</li></ul><ol start="3"><li>You have <strong>Graph Node</strong> syncing your indexer&#x27;s on-chain allocations.</li><li>You have created a <code>.env</code> file that includes at least the required environment variables. To see the full list of environment variables you can provide, check out the <a href="#configuration">Configuration</a> section.</li></ol><h4 class="anchor anchorWithStickyNavbar_LWe7" id="running-the-subgraph-radio-natively">Running the Subgraph Radio natively<a href="#running-the-subgraph-radio-natively" class="hash-link" aria-label="Direct link to Running the Subgraph Radio natively" title="Direct link to Running the Subgraph Radio natively">​</a></h4><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#243D42"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">cargo run --release</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/graphops/docs/edit/main/docs/graphcast/radios/subgraph-radio.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/graphcast/radios/3la-monitor"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">3LA - Listener Radio</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/graphcast/radios/one-shot"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">One-shot CLI</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a><ul><li><a href="#basic-configuration" class="table-of-contents__link toc-highlight">Basic Configuration</a></li><li><a href="#run-with-docker" class="table-of-contents__link toc-highlight">Run with Docker</a></li><li><a href="#or-run-with-docker-compose" class="table-of-contents__link toc-highlight">(or) Run with docker-compose</a></li><li><a href="#or-run-as-part-of-stakesquids-docker-compose-setup" class="table-of-contents__link toc-highlight">(or) Run as part of StakeSquid&#39;s docker-compose setup</a></li><li><a href="#or-run-using-a-pre-built-binary" class="table-of-contents__link toc-highlight">(or) Run using a pre-built binary</a></li></ul></li><li><a href="#advanced-configuration" class="table-of-contents__link toc-highlight">Advanced Configuration</a><ul><li><a href="#configurations-explained" class="table-of-contents__link toc-highlight">Configurations explained</a></li></ul></li><li><a href="#monitoring-the-radio" class="table-of-contents__link toc-highlight">Monitoring the Radio</a><ul><li><a href="#notifications" class="table-of-contents__link toc-highlight">Notifications</a></li><li><a href="#prometheus--grafana" class="table-of-contents__link toc-highlight">Prometheus &amp; Grafana</a></li></ul></li><li><a href="#http-server" class="table-of-contents__link toc-highlight">HTTP Server</a></li><li><a href="#how-it-works" class="table-of-contents__link toc-highlight">How it works</a><ul><li><a href="#fetching-active-allocations" class="table-of-contents__link toc-highlight">Fetching active allocations</a></li><li><a href="#gathering-and-comparing-normalised-pois" class="table-of-contents__link toc-highlight">Gathering and comparing normalised POIs</a></li></ul></li><li><a href="#developing-the-subgraph-radio" class="table-of-contents__link toc-highlight">Developing the Subgraph Radio</a><ul><li><a href="#building-subgraph-radio-locally" class="table-of-contents__link toc-highlight">Building Subgraph Radio locally</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Graph Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://discord.com/invite/graphprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://twitter.com/graphprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/graphprotocol" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Indexer Office Hours</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/TheGraphIOH" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/channel/UCQ7G_cCufIVUdUUUf-jdoVA" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube Recordings<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://graphops.notion.site/Indexer-Office-Hours-952e0b50a65144768aab922e2c9d102a" target="_blank" rel="noopener noreferrer" class="footer__link-item">All Prior Calls &amp; Agendas<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">GraphOps</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/graphopsxyz" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/graphops" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://graphops.xyz" target="_blank" rel="noopener noreferrer" class="footer__link-item">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"> </div></div></div></footer></div>
<script src="/assets/js/runtime~main.966bbc6c.js"></script>
<script src="/assets/js/main.e35f3781.js"></script>
</body>
</html>